(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,a){},,,function(e,t,a){e.exports=a(27)},,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(11),i=a.n(n),s=a(2),o=a(3),l=a(5),h=a(4),u=a(6),m=a(1),d=a(12),f=a.n(d),C={PRIVATE:"f3dc6bee5afbcf48676136a33cda37a43f7c9d7e",PUBLIC:"ff0a364af171967c9afa65f48246de25"},v="https://gateway.marvel.com/v1/public/",p=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,[{key:"getMaxResults",value:function(){return 20}},{key:"readCharacterById",value:function(e,t){var a=this;fetch(this.getReadCharacterByIdURL(e)).then(function(e){return e.json()}).then(function(e){return t(e.data.results[0])}).catch(function(e){return a.processRequestError(e)})}},{key:"getReadCharacterByIdURL",value:function(e){return"".concat(v,"characters/").concat(e,"?").concat(this.getHash())}},{key:"listCharacters",value:function(e,t,a){var r=this;fetch(this.getListCharactersURL(e,t)).then(function(e){return e.json()}).then(function(e){return a(e.data.results)}).catch(function(e){return r.processRequestError(e)})}},{key:"getListCharactersURL",value:function(e,t){return e?"".concat(v,"characters?nameStartsWith=").concat(e,"&limit=").concat(20,"&offset=").concat(t,"&").concat(this.getHash()):"".concat(v,"characters?limit=").concat(20,"&offset=").concat(t,"&").concat(this.getHash())}},{key:"readRandomCharacter",value:function(e){var t=Math.floor(1e3*Math.random());this.listCharacters(null,t,function(t){var a=Math.floor(Math.random()*t.length);e(t[a].id)})}},{key:"listComics",value:function(e,t){var a=this;fetch(this.readComicURL(e)).then(function(e){return e.json()}).then(function(e){var a=e.data.results.map(function(e){return e.thumbnail.path+"."+e.thumbnail.extension});t(a)}).catch(function(e){return a.processRequestError(e)})}},{key:"readComicURL",value:function(e){return"".concat(v,"characters/").concat(e,"/comics?").concat(this.getHash())}},{key:"processRequestError",value:function(e){console.log(e)}},{key:"getHash",value:function(){var e=(new Date).getTime(),t=f()(e+C.PRIVATE+C.PUBLIC);return"ts=".concat(e,"&apikey=").concat(C.PUBLIC,"&hash=").concat(t)}}]),e}(),b=a(7),k=a.n(b),g=(a(21),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.className;return c.a.createElement("div",{className:"loader ".concat(e)},c.a.createElement("span",{className:"loader__spinner icon-circle-o-notch"}))}}]),t}(r.Component)),E=(a(22),a(10),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).apiHandler=new p,a.state={isMobile:!1,searchActive:!1,searchResults:[],dropdownActive:!1,showLoader:!1},a.searchCharacter=a.searchCharacter.bind(Object(m.a)(Object(m.a)(a))),a.onIconClick=a.onIconClick.bind(Object(m.a)(Object(m.a)(a))),a.renderCharacter=a.renderCharacter.bind(Object(m.a)(Object(m.a)(a))),a.handleResize=a.handleResize.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.setState({isMobile:this.isMobile()})}},{key:"isMobile",value:function(){return window.innerWidth<768}},{key:"onIconClick",value:function(){this.setState({searchActive:!this.state.searchActive})}},{key:"searchCharacter",value:function(e){var t=this,a=e.target.value;this.setState({dropdownActive:!0}),0===this.state.searchResults.length&&this.setState({showLoader:!0}),a.length%3===0&&(""===a?this.setState({searchResults:[],showLoader:!1,dropdownActive:!1}):this.apiHandler.listCharacters(a,null,function(e){return t.setState({searchResults:e,showLoader:!1})}))}},{key:"renderCharacter",value:function(e){var t=this.props.onCharacterClick;this.setState({searchResults:[],searchActive:!1,dropdownActive:!1}),t(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchResults,r=t.searchActive,n=t.isMobile,i=t.dropdownActive,s=t.showLoader;return c.a.createElement("div",{className:k()("search",{active:r,mobile:n})},c.a.createElement("div",{className:"search__container"},c.a.createElement("span",{className:"icon-search",onClick:this.onIconClick}),c.a.createElement("input",{type:"text",placeholder:"Search for character",onChange:this.searchCharacter,className:k()("search__input",{hidden:!r})})),i&&c.a.createElement("ul",{className:"search__dropdown"},s&&c.a.createElement(g,null),a.length>0&&a.map(function(t,a){return c.a.createElement("li",{key:a,ref:t.id,onClick:function(){return e.renderCharacter(t.id)}},t.name)})))}}]),t}(r.Component)),y=(a(23),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={imageLoaded:!1},a.onImageLoad=a.onImageLoad.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"onImageLoad",value:function(){this.setState({imageLoaded:!0})}},{key:"render",value:function(){var e=this.props,t=e.src,a=e.alt,r=this.state.imageLoaded;return c.a.createElement("div",{className:"image-loader"},!r&&c.a.createElement(g,{className:"image-loader__placeholder"}),c.a.createElement("img",{alt:a,className:k()("image-loader__img",{hidden:!r}),onLoad:this.onImageLoad,src:t}))}}]),t}(r.Component)),j=(a(24),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).apiHandler=new p,a.state={character:null,comics:null},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.featureCharacterId;t!==e.featureCharacterId&&(this.setState({character:null,comics:null}),this.renderFeatureCharacter(t))}},{key:"getCharacterImageURL",value:function(e,t){return"".concat(e,"/standard_fantastic.").concat(t)}},{key:"renderFeatureCharacter",value:function(e){var t=this;this.apiHandler.readCharacterById(e,function(e){return t.setState({character:e})}),this.renderFeatureComics(e)}},{key:"renderFeatureComics",value:function(e){var t=this;this.apiHandler.listComics(e,function(e){return t.setState({comics:e})})}},{key:"render",value:function(){var e=this.state,t=e.character,a=e.comics;return t?c.a.createElement("div",{className:"featured-character"},c.a.createElement("div",{className:"featured-character__header"},c.a.createElement("img",{alt:"Featured Character",className:"feature-character__img",src:this.getCharacterImageURL(t.thumbnail.path,t.thumbnail.extension)}),c.a.createElement("div",null,c.a.createElement("h1",null,t.name),c.a.createElement("ul",{className:"featured-character__links"},t.urls.map(function(e,t){return c.a.createElement("li",{className:"feature-character__link",key:t},c.a.createElement("a",{href:e.url},e.type))})))),c.a.createElement("h2",null,"Description"),c.a.createElement("p",{className:"feature-character__description"},t.description?t.description:"Sorry, there is no description for this character."),c.a.createElement("h2",null,"Comics"),t.comics.items.length>0?a?c.a.createElement("ul",{className:"feature-comics"},a.map(function(e,t){return c.a.createElement("li",{key:t,className:"feature-comics__container"},c.a.createElement(y,{src:e,alt:"Comics"}))})):c.a.createElement("p",null,"Searching for comics..."):c.a.createElement("p",null,"Sorry, there is no comic books for this character.")):c.a.createElement(g,null)}}]),t}(r.Component)),O=(a(25),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).apiHandler=new p,a.state={characters:[],offset:0},a.scrollLeft=a.scrollLeft.bind(Object(m.a)(Object(m.a)(a))),a.infiniteScroll=a.infiniteScroll.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.renderCarousel()}},{key:"renderCarousel",value:function(){var e=this,t=this.props.nameStartsWith;this.state.characters.length===this.state.offset&&(this.apiHandler.listCharacters(t,this.state.offset,function(t){e.setState({characters:e.state.characters.concat(t)})}),this.setState({offset:this.state.offset+this.apiHandler.getMaxResults()}))}},{key:"getImageURL",value:function(e,t,a){return"big"===a?"".concat(e,"/portrait_fantastic.").concat(t):"".concat(e,"/landscape_large.").concat(t)}},{key:"getClassName",value:function(e){return"big"===e?"carousel carousel__items--big":"carousel carousel__items--default"}},{key:"scrollLeft",value:function(e){e.target.classList.contains("icon-chevron-right")?e.target.previousElementSibling.scrollLeft+=400:e.target.nextElementSibling.scrollLeft-=400}},{key:"infiniteScroll",value:function(e){e.target.scrollWidth-e.target.offsetWidth-100<=e.target.scrollLeft&&this.renderCarousel()}},{key:"render",value:function(){var e=this,t=this.props,a=t.size,r=t.title,n=t.onCharacterClick,i=this.state.characters;return i.length>0&&c.a.createElement("div",null,c.a.createElement("h2",null,r),c.a.createElement("div",{className:this.getClassName(a)},c.a.createElement("span",{className:"carousel__icon icon-chevron-left",onClick:this.scrollLeft}),c.a.createElement("div",{className:"carousel__container--outer",onScroll:this.infiniteScroll},c.a.createElement("ul",{className:"carousel__container--inner"},i.map(function(t,r){return c.a.createElement("li",{key:r,className:"carousel__item",onClick:function(){return n(t.id)}},c.a.createElement("img",{alt:"Character",className:"carousel__item--img",src:e.getImageURL(t.thumbnail.path,t.thumbnail.extension,a)}),c.a.createElement("p",{className:"carousel__item--details"},t.name))}))),c.a.createElement("span",{className:"carousel__icon icon-chevron-right",onClick:this.scrollLeft})))}}]),t}(r.Component)),_=(a(26),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).apiHandler=new p,a.state={featureCharacterId:null},a.onCharacterClick=a.onCharacterClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.apiHandler.readRandomCharacter(function(t){return e.setState({featureCharacterId:t})})}},{key:"onCharacterClick",value:function(e){this.setState({featureCharacterId:e}),window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"header"},c.a.createElement("a",{href:"#",className:"header__logo"}),c.a.createElement(E,{onCharacterClick:this.onCharacterClick})),c.a.createElement("main",null,c.a.createElement(j,{featureCharacterId:this.state.featureCharacterId}),c.a.createElement(O,{onCharacterClick:this.onCharacterClick,size:"big",title:"Characters - A"}),c.a.createElement(O,{onCharacterClick:this.onCharacterClick,nameStartsWith:"b",title:"Characters - B"}),c.a.createElement(O,{onCharacterClick:this.onCharacterClick,nameStartsWith:"c",title:"Characters - C"}),c.a.createElement(O,{onCharacterClick:this.onCharacterClick,nameStartsWith:"d",title:"Characters - D"}),c.a.createElement(O,{onCharacterClick:this.onCharacterClick,nameStartsWith:"e",title:"Characters - E"})),c.a.createElement("footer",null,c.a.createElement("p",null,'"Data provided by Marvel. \xa9 2014 Marvel"')))}}]),t}(r.Component));i.a.render(c.a.createElement(_,null),document.getElementById("root"))}],[[13,1,2]]]);
//# sourceMappingURL=main.20d432b4.chunk.js.map